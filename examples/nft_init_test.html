<html>
<body>

<!-- <script src="js/third_party/three.js/three.min.js"></script> -->
<!-- <script src="../build/artoolkit.debug.js"></script> -->
<script src="../build/artoolkit.min.js"></script>
<script src="../js/artoolkit.api.js"></script>

<video id="video" src="Data/IMG_3145.mov" width="640" height="360" loop="" controls="" autoplay></video>
<!-- <img id="v" src="Data/IMG_3141.JPG"></img> -->

<script>
var video = document.querySelector('#video');
//var ar = new ARController(video.videoWidth, video.videoHeight, 'Data/camera_para.dat');
var ar = new ARController(640, 360, 'Data/camera_para.dat');
ar.onload = function() {
	var markerId;

	// Load pattern marker.
	//
	//ar.loadMarker('Data/patt.hiro', function(marker) {
	//	markerId = marker;
	//});

        ar.loadNFTMarker('DataNFT/pinball', function(marker) {
          markerId = marker;
        });

	ar.addEventListener('getNFTMarker', function(ev) {
          console.log('yaaa');
		if (ev.data.marker.idPatt === markerId) {
			console.log('saw marker', ev.data.marker);
			console.log('transformation matrix', ar.getTransformationMatrix());
		}
	});

	//console.log('camera matrix', ar.getCameraMatrix());

	setInterval(function() {
		ar.process(video);
	}, 33);
};


</script>

</body>
</html>
